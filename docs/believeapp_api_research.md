# BelieveApp API Research

## Overview
BelieveApp provides an API for token burning functionality, which is essential for our prediction market platform. The API allows for burning tokens based on provided proof, with options to persist proof data on-chain.

## Authentication
- API key required, generated from https://believe.app/projects
- API key must have the `burn` scope
- API key must be provided in the `X-Believe-API-Key` request header
- Example: `X-Believe-API-Key: your_actual_api_key_here`

## Rate Limiting
- 10 requests per second per API key

## Idempotency
- Supported via the `X-Idempotency-Key` header
- Value: A unique string (e.g., UUID) generated by the client for each distinct operation
- Purpose: Prevents accidental duplicate operations if a request is retried due to network errors

## Endpoints

### 1. Burn Tokens (Single)
- Endpoint: `POST /v1/tokenomics/burn`
- Description: Burns a specified amount of tokens based on a provided proof

#### Request Body
| Field | Type | Required | Description |
|-------|------|----------|-------------|
| type | string | Yes | Identifier for the type of proof (e.g., "PRODUCT_BUY", "PRODUCT_SELL") |
| proof | Object | Yes | JSON object containing the actual proof data, structure depends on the type |
| burnAmount | number | Yes | Quantity of tokens to burn, must be positive |
| persistOnchain | boolean | Yes | Whether to record the proof hash on the blockchain |

#### Example Request
```json
{
  "type": "PRODUCT_BUY",
  "proof": {
    "transactionId": "237892372",
    "value": "100"
  },
  "burnAmount": 10000,
  "persistOnchain": true
}
```

#### Response
| Field | Type | Description |
|-------|------|-------------|
| result | string | Outcome of the operation (e.g., "SUCCESS") |
| hash | string | SHA256 hash of the provided proof |
| txHash | string | On-chain transaction hash (if persistOnchain was true) |
| type | string | Type of proof that was processed |
| dateBurned | string | ISO 8601 timestamp of when the burn was processed |

#### Example Response
```json
{
  "result": "SUCCESS",
  "hash": "NEW_HASH_FOR_PRODUCT_BUY_EXAMPLE_TO_BE_CALCULATED",
  "txHash": "21RHE6MoxjjTHvKZ5X9hg6pS6dCT7pikuL1AQmFXVPqHCxt2fQZaoJ3WbYrJUzn1KxFNkFSF1Z4v7Hk4PRpWQx3J",
  "type": "PRODUCT_BUY",
  "dateBurned": "2025-05-20T01:56:40.169Z"
}
```

### 2. Burn Batch Tokens
- Endpoint: `POST /v1/tokenomics/burn-batch`
- Description: Burns multiple tokens in a single request, each based on a provided proof

#### Request Body
An array of objects, each with the same structure as the single burn request.

#### Example Request
```json
[
  {
    "type": "<string>",
    "proof": {},
    "burnAmount": 123,
    "persistOnchain": true
  }
]
```

#### Response
Contains success and failure arrays with details for each operation.

## Error Codes
- 400 Bad Request: Functional errors related to the burn operation
- 401 Unauthorized: Authentication errors
- Common errors include:
  - ERR_TOKEN_NOT_FOUND: Token not found or invalid
  - ERR_INSUFFICIENT_BALANCE: Insufficient token balance for burn
  - ERR_INVALID_PROOF: Invalid proof data
  - ERR_INVALID_BURN_AMOUNT: Invalid burn amount (e.g., negative or zero)

## Implementation Considerations for Our Platform
1. Different burn rates for placing bets vs claiming rewards
2. Batch processing for efficiency when multiple users place bets simultaneously
3. Proper error handling for insufficient balance scenarios
4. Idempotency implementation to prevent duplicate burns
5. Persistent on-chain proof for transparency and verification
